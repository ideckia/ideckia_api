# commands

Here is the API for the commands used by [ideckia](https://github.com/ideckia/ideckia_server).

## Concepts

* Layout: Bunch of items
* Item: An element that has one or more states and is clickable.
* State: Definition of the item status: text, textColor, bgColor, icon and a command which will be executed when the item is pressed.

## Command structure

* setProps(props, initialState, server):Void
  * Server will call to this to inject the configuration of the command instance
  * Parameters:
    * props: Properties definde for the instance in the layout
    * initialState: Initial state of the item of the layout
    * server: Some tools that server offers:
      * log: Logs in the server process. Four levels (debug, info, warn, error)
      * sendToClient: a function to send to the client the state of the item.
      * props: Properties read by the server from `app.props` file
* init():Void
  * Entry point.
  * The server will call to this once, to initialize what you need
* execute():ItemState
  * Needs to be implemented.
  * The server will call when the associated item is clicked. The function will return the new state of the item. If null is returned, nothing changes.
* toJson:Any
  * Needs to be implemented, autogenerated with macros in haxe.
  * This will return the JSON to write to the layout file in the server side
* getCmdDescriptor():CmdDescriptor
  * Needs to be implemented, autogenerated with macros in haxe.
  * This will return command descriptor structure which will be used by an editor
